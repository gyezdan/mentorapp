{% extends 'chat/chatplatform.html' %}
{% block messages %}
<div class="msg_history">
  {% for message in usermessages %}
      {% if message.sender == request.user %}
      <div class="outgoing_msg">
        <div class="sent_msg">
          <p>{{ message }}</p>
          <span class="time_date"> 11:01 AM    |    Today</span>
        </div>
      </div>
      {% else %}
      <div class="incoming_msg">
        <div class="incoming_msg_img"> <img src="{{ receiver.profile.profilePicture.url }}"> </div>
          <div class="received_msg">
            <div class="received_withd_msg">
              <p>{{ message }}</p>
                <span class="time_date"> 11:01 AM    |    June 9</span>
            </div>
          </div>
      </div>
      {% endif %}
      {% endfor %}
  </div>
<script>
$(function () {
    //Highlighting the user that is currently selected for chatting in the users list
    $('#user{{ receiver.id }}').addClass('active');
    //Call receive function at an interval of 1 second to check for new messages in the database
    setInterval(receive,1000)
})
</script>

{% endblock %}